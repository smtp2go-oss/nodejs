/*!
 * 
 *   smtp2go-nodejs v0.3.4-alpha.2
 *   git+https://github.com/smtp2go-oss/nodejs.git
 *
 *   Copyright (c) SMTP2GO (https://github.com/smtp2go-oss) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["smtp2go-nodejs"]=t():e["smtp2go-nodejs"]=t()}(global,(()=>(()=>{var e={116:e=>{"use strict";e.exports=require("@babel/runtime/helpers/defineProperty")},143:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var s=r(564),n=r.n(s),i=r(998),o=r.n(i),a=r(898),u=r.n(a),c=r(116),d=r.n(c),h=r(738),l=r.n(h);const p=require("axios");var f=r.n(p);const m=JSON.parse('{"rE":"0.3.4-alpha.2"}');function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(){return u()((function e(t){o()(this,e),d()(this,"apiKey",void 0),d()(this,"apiUrl","https://api.smtp2go.com/v3/"),d()(this,"headers",{}),this.apiKey=t}),[{key:"setApiKey",value:function(e){this.apiKey=e}},{key:"setHeaders",value:function(e){this.headers=e}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json","X-Smtp2go-Api":"smtp2go-nodejs","X-Smtp2go-Api-Version":m.rE};return v(v({},this.headers),e)}},{key:"consume",value:(e=n()(l().mark((function e(t){var r,s,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buildRequestBody();case 2:return(r=e.sent).api_key=this.apiKey,e.prev=4,e.next=7,f()({method:t.getMethod(),url:this.apiUrl+t.getEndpoint(),headers:this.getHeaders(),data:r});case 7:return s=e.sent,n=s.data,e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",e.t0.response);case 15:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(t){return e.apply(this,arguments)})}]);var e}()},159:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var s=r(898),n=r.n(s),i=r(998),o=r.n(i),a=r(609),u=r.n(a),c=r(285),d=r.n(c),h=r(750),l=r.n(h);function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}var f=function(e){function t(e,r){var s,n,i,a;return o()(this,t),n=this,i=t,a=[r],i=d()(i),(s=u()(n,p()?Reflect.construct(i,a||[],d()(n).constructor):i.apply(n,a))).filename=e,s}return l()(t,e),n()(t)}(r(537).A)},228:(e,t,r)=>{"use strict";r.d(t,{A:()=>j});var s=r(564),n=r.n(s);const i=require("@babel/runtime/helpers/toConsumableArray");var o=r.n(i),a=r(998),u=r.n(a),c=r(898),d=r.n(c),h=r(609),l=r.n(h),p=r(285),f=r.n(p);const m=require("@babel/runtime/helpers/get");var y=r.n(m),v=r(750),b=r.n(v),A=r(116),x=r.n(A),k=r(738),g=r.n(k),O=r(537);function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function B(e,t,r,s){var n=y()(f()(1&s?e.prototype:e),t,r);return 2&s&&"function"==typeof n?function(e){return n.apply(r,e)}:n}var j=function(e){function t(){var e,r,s,n;return u()(this,t),r=this,s=t,n=["email/send"],s=f()(s),e=l()(r,q()?Reflect.construct(s,n||[],f()(r).constructor):s.apply(r,n)),x()(e,"htmlBody",void 0),x()(e,"textBody",void 0),x()(e,"fromAddress",void 0),x()(e,"toAddress",void 0),x()(e,"ccAddress",void 0),x()(e,"bccAddress",void 0),x()(e,"subjectLine",void 0),x()(e,"templateId",void 0),x()(e,"templateData",void 0),x()(e,"customHeaders",void 0),x()(e,"attachments",void 0),x()(e,"inlines",void 0),["toAddress","ccAddress","bccAddress","customHeaders","attachments","inlines"].forEach((function(t){return e[t]=[]})),e}return b()(t,e),d()(t,[{key:"addAddress",value:function(e,t){switch(t){case"cc":this.ccAddress.push(e);break;case"bcc":this.bccAddress.push(e);break;default:this.toAddress.push(e)}return this}},{key:"html",value:function(e){return this.htmlBody=e,this}},{key:"text",value:function(e){return this.textBody=e,this}},{key:"from",value:function(e){return this.fromAddress=e,this}},{key:"template",value:function(e,t){return this.templateId=e,this.templateData=t,this}},{key:"to",value:function(e){return this._addAddressOfType(e,"to"),this}},{key:"cc",value:function(e){return this._addAddressOfType(e,"cc"),this}},{key:"bcc",value:function(e){return this._addAddressOfType(e,"bcc"),this}},{key:"_addAddressOfType",value:function(e,t){var r=this;return Array.isArray(e)?e.map((function(e){return r.addAddress(e,t)})):this.addAddress(e,t),this}},{key:"headers",value:function(e){var t;Array.isArray(e)?(t=this.customHeaders).push.apply(t,o()(e)):this.customHeaders.push(e);return this}},{key:"subject",value:function(e){return this.subjectLine=e,this}},{key:"attach",value:function(e){if("string"==typeof e)this.attachments.push(new O.A(e));else if(Array.isArray(e)){var t;(t=this.attachments).push.apply(t,o()(e))}else this.attachments.push(e);return this}},{key:"inline",value:function(e,t){var r=new O.A(t);return r.filename=e,this.inlines.push(r),this}},{key:"getFormattedAddresses",value:function(e){return this[e+"Address"].map(this.formatAddress)}},{key:"formatAddress",value:function(e){return null!=e&&e.name?"".concat(e.name," <").concat(e.email,">").trim():"<".concat(e.email,">").trim()}},{key:"buildRequestBody",value:(r=n()(g().mark((function e(){var r,s,n,i=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.requestBody=new Map,this.requestBody.set("html_body",this.htmlBody),this.textBody&&this.requestBody.set("text_body",this.textBody||""),!this.toAddress.length){e.next=7;break}this.requestBody.set("to",this.getFormattedAddresses("to")),e.next=8;break;case 7:throw Error('At least one "to" address is required.');case 8:if(this.ccAddress.length&&this.requestBody.set("cc",this.getFormattedAddresses("cc")),this.bccAddress.length&&this.requestBody.set("bcc",this.getFormattedAddresses("bcc")),null===(r=this.fromAddress)||void 0===r||!r.email){e.next=14;break}this.requestBody.set("sender",this.formatAddress(this.fromAddress)),e.next=15;break;case 14:throw Error("A from email address is required.");case 15:if(this.requestBody.set("subject",this.subjectLine),this.customHeaders.length&&this.requestBody.set("custom_headers",this.customHeaders),this.templateId&&this.requestBody.set("template_id",this.templateId),(null===(s=this.templateData)||void 0===s?void 0:s.size)>0&&this.requestBody.set("template_data",Object.fromEntries(this.templateData)),!this.attachments.length&&!this.inlines.length){e.next=24;break}return n=[],["attachments","inlines"].forEach((function(e){i[e].forEach((function(e){n.push(e.readFileBlob())}))})),e.next=24,Promise.all(n).then((function(){["attachments","inlines"].forEach((function(e){i[e].length&&i.requestBody.set(e,i[e].map((function(e){return e.forSend()})))}))}));case 24:return e.next=26,B(t,"buildRequestBody",this,3)([]);case 26:return e.abrupt("return",e.sent);case 27:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]);var r}(r(452).A)},285:e=>{"use strict";e.exports=require("@babel/runtime/helpers/getPrototypeOf")},316:()=>{},452:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var s=r(564),n=r.n(s),i=r(998),o=r.n(i),a=r(898),u=r.n(a),c=r(116),d=r.n(c),h=r(738),l=r.n(h);const p=function(){return u()((function e(t,r,s){o()(this,e),d()(this,"method",void 0),d()(this,"endpoint",void 0),d()(this,"requestBody",void 0),this.endpoint=t,this.requestBody=r||new Map,this.method=s||"POST"}),[{key:"getMethod",value:function(){return this.method}},{key:"getEndpoint",value:function(){return this.endpoint}},{key:"buildRequestBody",value:(e=n()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(Object.fromEntries(this.requestBody));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e}()},537:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var s=r(564),n=r.n(s),i=r(998),o=r.n(i),a=r(898),u=r.n(a),c=r(116),d=r.n(c),h=r(738),l=r.n(h),p=r(896).promises,f=r(904),m=r(928),y=function(){return u()((function e(t){o()(this,e),d()(this,"filepath",void 0),d()(this,"filename",void 0),d()(this,"fileblob",void 0),d()(this,"mimetype",void 0),this.filepath=t,this.mimetype=f.lookup(this.filepath),this.filename=m.basename(this.filepath),this.fileblob=""}),[{key:"setFileBlob",value:function(e){return this.fileblob=e,this}},{key:"readFileBlob",value:(e=n()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==this.fileblob){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,p.readFile(this.filepath,{encoding:"base64"}).catch((function(e){throw e}));case 4:return this.fileblob=e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"forSend",value:function(){return{filename:this.filename,fileblob:this.fileblob,mimetype:this.mimetype}}}]);var e}()},564:e=>{"use strict";e.exports=require("@babel/runtime/helpers/asyncToGenerator")},609:e=>{"use strict";e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},738:e=>{"use strict";e.exports=require("@babel/runtime/regenerator")},750:e=>{"use strict";e.exports=require("@babel/runtime/helpers/inherits")},780:()=>{},896:e=>{"use strict";e.exports=require("fs")},898:e=>{"use strict";e.exports=require("@babel/runtime/helpers/createClass")},904:e=>{"use strict";e.exports=require("mime-types")},905:()=>{},928:e=>{"use strict";e.exports=require("path")},998:e=>{"use strict";e.exports=require("@babel/runtime/helpers/classCallCheck")}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";r.r(s),r.d(s,{ApiClient:()=>e.A,InlineAttachment:()=>o.A,MailAttachment:()=>i.A,MailService:()=>n.A,Service:()=>t.A,default:()=>h});var e=r(143),t=r(452),n=r(228),i=r(537),o=r(159),a=r(905),u={};for(const e in a)["default","ApiClient","Service","MailService","MailAttachment","InlineAttachment"].indexOf(e)<0&&(u[e]=()=>a[e]);r.d(s,u);var c=r(316);u={};for(const e in c)["default","ApiClient","Service","MailService","MailAttachment","InlineAttachment"].indexOf(e)<0&&(u[e]=()=>c[e]);r.d(s,u);var d=r(780);u={};for(const e in d)["default","ApiClient","Service","MailService","MailAttachment","InlineAttachment"].indexOf(e)<0&&(u[e]=()=>d[e]);function h(r){return{service:function(e){return new t.A(e)},mail:function(){return new n.A},client:function(){return new e.A(r)}}}r.d(s,u)})(),s})()));
//# sourceMappingURL=index.js.map